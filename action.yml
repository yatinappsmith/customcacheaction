name: "Create a Persistent Cache"
description: "Create a persistent cache using git"

inputs:
  repo_name:
    description: "Name of the repositry to be used for cache"
    required: true
  token:
    description: "token for cloning"
    required: true
  filename:
    description: "file to be cache "
    required: true
  cache_name:
    description: "unique cache name to be refrenced"
    required: true
  actiontype:
    description: "Actiontype STORE RETRIEVE"
    required: true

  runs:
    using: composite
    steps: 
      - name: Store file in cache
        run: |
          mkdir cacherepo
          cd ./cacherepo
          git clone https:// ${{inputs.token}}@github.com/${{inputs.repo_name}}
          export dir=`ls`
          cd $dir
          mkdir ${{inputs.cache_name}}
          cp $filename ./${{inputs.cache_name}}/
          git add ./${{inputs.cache_name}}/${{inputs.filename}}
          git commit -m "${{inputs.cache_name}}"
          git push
        
    
